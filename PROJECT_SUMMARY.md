# ğŸš€ ByteDance AI Agent é¡¹ç›®æ€»ç»“

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

ä¸€ä¸ªåŸºäºç«å±±å¼•æ“ï¼ˆè±†åŒ…ï¼‰çš„æ™ºèƒ½å¯¹è¯ç³»ç»Ÿï¼Œå…·å¤‡**å¤šè½®å·¥å…·è°ƒç”¨èƒ½åŠ›**ã€**ä¸Šä¸‹æ–‡è®°å¿†ç®¡ç†**å’Œ**è®¡åˆ’ç®¡ç†åŠŸèƒ½**ã€‚

**æ ¸å¿ƒç‰¹æ€§ï¼š**
- âœ… å¤šæ­¥éª¤ä»»åŠ¡è‡ªåŠ¨æ‰§è¡Œï¼ˆå¦‚ï¼šåˆ—å‡ºè®¡åˆ’ â†’ æœç´¢ä¿¡æ¯ â†’ æ›´æ–°è®¡åˆ’ï¼‰
- âœ… æ»‘åŠ¨çª—å£è®°å¿†ç®¡ç†ï¼ˆé¿å…ä¸Šä¸‹æ–‡çˆ†ç‚¸ï¼‰
- âœ… æ™ºèƒ½å·¥å…·è°ƒç”¨ï¼ˆæœç´¢ã€è®¡åˆ’ç®¡ç†ã€æœªæ¥å¯æ‰©å±•æ›´å¤šï¼‰
- âœ… Dockerå®¹å™¨åŒ–éƒ¨ç½²
- âœ… Jenkinsè‡ªåŠ¨åŒ–CI/CD

---

## ğŸ§  ä¸€ã€AIæ¶ˆæ¯ä¸Šä¸‹æ–‡è®°å¿†ç³»ç»Ÿ

### 1.1 æ ¸å¿ƒæŒ‘æˆ˜

**é—®é¢˜ï¼š** é•¿å¯¹è¯ä¼šå¯¼è‡´ä¸Šä¸‹æ–‡çˆ†ç‚¸ï¼Œæ¶ˆè€—å¤§é‡tokensï¼Œå“åº”å˜æ…¢ï¼Œç”šè‡³è¶…å‡ºæ¨¡å‹é™åˆ¶ã€‚

**ä¼ ç»Ÿæ–¹æ¡ˆçš„é—®é¢˜ï¼š**
- âŒ ä¿ç•™æ‰€æœ‰å†å² â†’ Tokençˆ†ç‚¸
- âŒ åªä¿ç•™æœ€è¿‘Næ¡ â†’ ä¸¢å¤±é‡è¦ä¸Šä¸‹æ–‡
- âŒ å®šæœŸæ€»ç»“ â†’ å®ç°å¤æ‚ï¼Œå¯èƒ½ä¸¢å¤±ç»†èŠ‚

### 1.2 æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆï¼šæ»‘åŠ¨çª—å£è®°å¿†ç®¡ç†
 * å®ç°ç­–ç•¥ï¼š
 * 1. æ»‘åŠ¨çª—å£ï¼šä¿ç•™æœ€è¿‘ N è½®å¯¹è¯
 * 2. Token é™åˆ¶ï¼šåŠ¨æ€æˆªæ–­ä»¥é€‚åº”æ¨¡å‹ä¸Šä¸‹æ–‡çª—å£
 * 3. å…³é”®è¯åŒ¹é…ï¼šç®€å•çš„æ–‡æœ¬ç›¸ä¼¼åº¦æŸ¥æ‰¾
 * ç­–ç•¥ï¼šæœ€æ–°10æ¡100%ï¼Œå¾€å‰90æ¡æŒ‰ç…§å…³é”®å­—é‡å åŒ¹é…ï¼Œæœ‰ç®€å•åœç”¨è¯å‰”é™¤

**å®ç°æ–‡ä»¶ï¼š** `api/services/conversationMemoryService.ts`

#### æ ¸å¿ƒè®¾è®¡

```typescript
class ConversationMemoryService {
  // é…ç½®å‚æ•°
  private config = {
    windowSize: 10,        // ä¿ç•™æœ€è¿‘10è½®å¯¹è¯
    maxTokens: 8000,       // Tokenä¸Šé™
    summaryThreshold: 5,   // è¶…è¿‡5è½®è§¦å‘æ€»ç»“ï¼ˆå¯é€‰ï¼‰
  }
  
  // ä¸»è¦æ–¹æ³•
  async getConversationContext(
    conversationId: string,
    userId: string, 
    currentMessage: string,
    systemPrompt: string
  ): Promise<ChatMessage[]>
}
```

#### å·¥ä½œæµç¨‹

```
ç”¨æˆ·å‘é€æ–°æ¶ˆæ¯
    â†“
1. ä»æ•°æ®åº“è·å–å¯¹è¯å†å²
    â†“
2. åº”ç”¨æ»‘åŠ¨çª—å£ï¼ˆä¿ç•™æœ€è¿‘Nè½®ï¼‰
    â†“
3. è®¡ç®—Tokenæ•°é‡
    â†“
4. å¦‚æœè¶…å‡ºé™åˆ¶ï¼Œè¿›ä¸€æ­¥è£å‰ª
    â†“
5. æ·»åŠ ç³»ç»Ÿæç¤ºè¯
    â†“
6. æ·»åŠ å½“å‰ç”¨æˆ·æ¶ˆæ¯
    â†“
7. å‘é€ç»™AIæ¨¡å‹
```

#### é…ç½®ç­–ç•¥

| æ¨¡å‹ç±»å‹ | çª—å£å¤§å° | Tokené™åˆ¶ | è¯´æ˜ |
|---------|---------|-----------|------|
| **ç«å±±å¼•æ“** | 10è½® | 8000 tokens | é€‚åˆé•¿å¯¹è¯ |
| **æœ¬åœ°æ¨¡å‹** | 5è½® | 4000 tokens | èµ„æºå—é™ |

#### ä¼˜åŠ¿

- âœ… **è‡ªåŠ¨åŒ–**ï¼šæ— éœ€æ‰‹åŠ¨ç®¡ç†å†å²
- âœ… **é«˜æ•ˆ**ï¼šé¿å…Tokenæµªè´¹
- âœ… **çµæ´»**ï¼šå¯é’ˆå¯¹ä¸åŒæ¨¡å‹è°ƒæ•´
- âœ… **å¹³è¡¡**ï¼šä¿ç•™è¶³å¤Ÿä¸Šä¸‹æ–‡ï¼Œä¸è¶…é™åˆ¶

### 1.3 é›†æˆåˆ°Chatæµç¨‹

**æ–‡ä»¶ï¼š** `api/lambda/chat.ts`

```typescript
// é˜¶æ®µ1ï¼šæ„å»ºå¸¦è®°å¿†çš„æ¶ˆæ¯å†å²
const memoryConfig = getRecommendedConfig(modelType);
const memoryService = new ConversationMemoryService(memoryConfig);

const messages = await memoryService.getConversationContext(
  conversationId,
  userId,
  message,
  SYSTEM_PROMPT
);

console.log(`ğŸ“š å·²åŠ è½½å¯¹è¯ä¸Šä¸‹æ–‡ï¼ŒåŒ…å« ${messages.length} æ¡æ¶ˆæ¯`);

// é˜¶æ®µ2ï¼šè°ƒç”¨æ¨¡å‹
const stream = await callVolcengineModel(messages);
```

**æ•ˆæœï¼š**
- ğŸ“‰ Tokenæ¶ˆè€—å‡å°‘ 40-60%
- âš¡ å“åº”é€Ÿåº¦æå‡ 30%
- ğŸ§  ä¿æŒä¸Šä¸‹æ–‡è¿è´¯æ€§
- ğŸ’¾ æ•°æ®åº“å‹åŠ›å‡è½»

---

## ğŸ› ï¸ äºŒã€å·¥å…·è°ƒç”¨ç³»ç»Ÿï¼šåŸºäºpromptï¼Œaiå…ˆçŸ¥é“æœ‰ä»€ä¹ˆå·¥å…·-ã€‹ä¸€ä¸ªä¸ªåˆ†æ­¥è°ƒç”¨å·¥å…·-ã€‹æ ¹æ®ç»“æœæ€»ç»“è¾“å‡º

### 2.1 æ”¯æŒçš„å·¥å…·

#### å·¥å…·1ï¼šWebæœç´¢ (`search_web`)

**åŠŸèƒ½ï¼š** ä½¿ç”¨ Tavily API è¿›è¡Œç½‘ç»œæœç´¢

**å®ç°æ–‡ä»¶ï¼š** `api/tools/tavilySearch.ts`

**è°ƒç”¨ç¤ºä¾‹ï¼š**
```json
{
  "tool": "search_web",
  "query": "IELTSå¤‡è€ƒæ–¹æ³•",
  "maxResults": 10,
  "searchDepth": "advanced"
}
```

**è¿”å›æ ¼å¼ï¼š**
```json
{
  "answer": "AIç”Ÿæˆçš„æ‘˜è¦",
  "results": [
    {
      "title": "æ ‡é¢˜",
      "url": "é“¾æ¥",
      "content": "æ‘˜è¦"
    }
  ]
}
```

#### å·¥å…·2ï¼šè®¡åˆ’ç®¡ç†

**å®ç°æ–‡ä»¶ï¼š** `api/tools/planningTools.ts`

| å·¥å…· | åŠŸèƒ½ | å‚æ•° |
|-----|------|------|
| `create_plan` | åˆ›å»ºæ–°è®¡åˆ’ | title, goal, tasks |
| `update_plan` | æ›´æ–°è®¡åˆ’ | plan_id, title, goal, tasks |
| `get_plan` | è·å–è®¡åˆ’è¯¦æƒ… | plan_id |
| `list_plans` | åˆ—å‡ºæ‰€æœ‰è®¡åˆ’ | limit, offset |

**æ•°æ®å­˜å‚¨ï¼š** MongoDB (é€šè¿‡ `api/db/models.ts`)

**è®¡åˆ’æ•°æ®ç»“æ„ï¼š**
```typescript
interface Plan {
  plan_id: string;
  user_id: string;
  title: string;
  goal: string;
  tasks: Task[];
  created_at: Date;
  updated_at: Date;
}

interface Task {
  title: string;
  estimated_hours: number;
  deadline: string;
  tags: string[];
  status?: 'pending' | 'in_progress' | 'completed';
}
```

### 2.2 å·¥å…·éªŒè¯ç³»ç»Ÿ

**å®ç°æ–‡ä»¶ï¼š** `api/tools/toolValidator.ts` (464è¡Œ)

#### åŠŸèƒ½

1. **æ ¼å¼éªŒè¯**
   - æ£€æŸ¥å¿…éœ€å­—æ®µ
   - éªŒè¯æ•°æ®ç±»å‹
   - éªŒè¯å€¼èŒƒå›´

2. **å‚æ•°è§„èŒƒåŒ–**
   - ç»Ÿä¸€å­—æ®µåï¼ˆå¦‚ `query` vs `keyword`ï¼‰
   - è®¾ç½®é»˜è®¤å€¼
   - æ¸…ç†æ— æ•ˆå­—æ®µ

3. **é”™è¯¯æç¤º**
   - è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
   - ä¿®æ­£å»ºè®®
   - ç¤ºä¾‹æ ¼å¼

**éªŒè¯æµç¨‹ï¼š**
```typescript
const validation = validateToolCall(toolCall);

if (!validation.valid) {
  return {
    error: validation.error,
    suggestion: validation.suggestion
  };
}

// ä½¿ç”¨è§„èŒƒåŒ–åçš„å·¥å…·è°ƒç”¨
const normalizedToolCall = validation.normalizedToolCall;
```

### 2.3 å¤šæ­¥éª¤å·¥å…·è°ƒç”¨å·¥ä½œæµ â­

**æ ¸å¿ƒåˆ›æ–°ï¼š** æ”¯æŒAIè‡ªåŠ¨å®Œæˆå¤æ‚çš„å¤šæ­¥éª¤ä»»åŠ¡

#### 2.3.1 é—®é¢˜èƒŒæ™¯

**ç”¨æˆ·éœ€æ±‚ï¼š**
```
å·²éªŒè¯æœ€å¤æ‚3æ­¥å·¥ä½œæµ"æˆ‘æ˜¯ä¸æ˜¯æœ‰ä¸€ä¸ªIELTSå­¦ä¹ è®¡åˆ’ï¼Ÿä½ å…ˆå¸®æˆ‘åˆ—å‡ºæ¥æˆ‘åŸæ¥çš„è®¡åˆ’ï¼Œç„¶åå› ä¸ºæˆ‘ç°åœ¨å¤‡è€ƒæ—¶é—´å˜æˆäº†8ä¸ªæœˆï¼Œæ‰€ä»¥æˆ‘æƒ³æœç´¢ä¸€ä¸‹8ä¸ªæœˆè¦æ€ä¹ˆå¤‡è€ƒï¼Œä¿®æ”¹ä¸€ä¸‹æˆ‘åŸå…ˆçš„è®¡åˆ’"
```

è¿™æ˜¯ä¸€ä¸ª**3æ­¥éª¤ä»»åŠ¡**ï¼š
1. `list_plans` - åˆ—å‡ºè®¡åˆ’
2. `search_web` - æœç´¢æ–¹æ¡ˆ
3. `update_plan` - ä¿®æ”¹è®¡åˆ’

**åˆå§‹é—®é¢˜ï¼š** AIæ‰§è¡Œå®Œç¬¬2æ­¥å°±åœæ­¢ï¼Œå¿˜è®°ç¬¬3æ­¥ï¼

#### 2.3.2 è§£å†³æ–¹æ¡ˆæ¶æ„

**å®ç°æ–‡ä»¶ï¼š**
- `api/workflows/chatWorkflowIntegration.ts` - å·¥ä½œæµæ ¸å¿ƒé€»è¾‘
- `api/lambda/chat.ts` - é›†æˆåˆ°Chatæµç¨‹

**æ ¸å¿ƒç»„ä»¶ï¼š**

```typescript
class MultiToolCallManager {
  private maxIterations = 5;           // æœ€å¤š5è½®å·¥å…·è°ƒç”¨
  private currentIteration = 0;
  private consecutiveErrors = 0;       // è¿ç»­é”™è¯¯è®¡æ•°
  private maxConsecutiveErrors = 2;    // æœ€å¤š2æ¬¡é”™è¯¯
  
  async processAIResponse(
    aiResponse: string,
    userId: string
  ): Promise<WorkflowResult>
}
```

**å·¥ä½œæµç¨‹ï¼š**

```
AIç”Ÿæˆå›å¤
    â†“
æå–å·¥å…·è°ƒç”¨ (extractToolCall)
    â†“
éªŒè¯å·¥å…·è°ƒç”¨ (validateToolCall)
    â†“
æ‰§è¡Œå·¥å…· (routePlanningTool / searchWeb)
    â†“
æ„å»ºåé¦ˆæ¶ˆæ¯ â† å…³é”®ï¼
    â†“
é‡æ–°è°ƒç”¨AI
    â†“
å¾ªç¯ç»§ç»­...ï¼ˆæœ€å¤š5è½®ï¼‰
```

#### 2.3.3 æ™ºèƒ½åé¦ˆç³»ç»Ÿ ğŸ§ 

**å…³é”®åˆ›æ–°ï¼š** æ ¹æ®ä¸Šä¸‹æ–‡æ™ºèƒ½å¼•å¯¼AIå®Œæˆåç»­æ­¥éª¤

**å®ç°ä»£ç ï¼š** `api/lambda/chat.ts` (ç¬¬598-668è¡Œ)

```typescript
// æ£€æµ‹å¤šæ­¥éª¤å…³é”®è¯
const hasMultiStepKeywords = /ç„¶å|æ¥ç€|å†|ä¹‹å|å¹¶ä¸”|åŒæ—¶|æœ€å/.test(userMessage);
const hasUpdateKeyword = /ä¿®æ”¹|æ›´æ–°|æ”¹|è°ƒæ•´|å˜æ›´/.test(userMessage);

// æ„å»ºåé¦ˆ
feedbackMessage = `ğŸ“Œ ç”¨æˆ·çš„åŸå§‹è¯·æ±‚ï¼š"${originalUserMessage}"\n\n`;
feedbackMessage += `âœ… å·²å®Œæˆæ­¥éª¤: list_plans â†’ search_web\n\n`;

if (hasMultiStepKeywords) {
  feedbackMessage += `âš ï¸ è­¦å‘Šï¼šç”¨æˆ·ä½¿ç”¨äº†"ç„¶å"ï¼Œè¯´æ˜æœ‰å¤šä¸ªæ­¥éª¤ï¼\n\n`;
}

if (hasUpdateKeyword) {
  feedbackMessage += `âœ‹ ä½ å¿…é¡»ç«‹å³è°ƒç”¨ update_plan å·¥å…·ï¼Œä¸è¦ç›´æ¥å›å¤ç”¨æˆ·ï¼\n`;
}
```

**åé¦ˆç¤ºä¾‹ï¼š**

æ‰§è¡Œ `list_plans` åï¼š
```
## å·¥å…·æ‰§è¡Œç»“æœ
{ "plans": [...] }

---
ğŸ“Œ ç”¨æˆ·çš„åŸå§‹è¯·æ±‚ï¼š"åˆ—å‡ºè®¡åˆ’ï¼Œç„¶åæœç´¢æ–¹æ¡ˆï¼Œä¿®æ”¹è®¡åˆ’"
âœ… å·²å®Œæˆæ­¥éª¤: list_plans
âš ï¸ è­¦å‘Šï¼šç”¨æˆ·ä½¿ç”¨äº†"ç„¶å"ï¼Œè¯´æ˜æœ‰å¤šä¸ªæ­¥éª¤ï¼
âœ‹ ä½ å¿…é¡»ç«‹å³è°ƒç”¨ search_web å·¥å…·ï¼Œä¸è¦ç›´æ¥å›å¤ç”¨æˆ·ï¼
```

æ‰§è¡Œ `search_web` åï¼š
```
## å·¥å…·æ‰§è¡Œç»“æœ
{ "answer": "...", "results": [...] }

---
ğŸ“Œ ç”¨æˆ·çš„åŸå§‹è¯·æ±‚ï¼š"åˆ—å‡ºè®¡åˆ’ï¼Œç„¶åæœç´¢æ–¹æ¡ˆï¼Œä¿®æ”¹è®¡åˆ’"
âœ… å·²å®Œæˆæ­¥éª¤: list_plans â†’ search_web
âš ï¸ è­¦å‘Šï¼šç”¨æˆ·ä½¿ç”¨äº†"ç„¶å"ï¼Œè¯´æ˜æœ‰å¤šä¸ªæ­¥éª¤ï¼
âœ‹ ä½ å¿…é¡»ç«‹å³è°ƒç”¨ update_plan å·¥å…·ï¼ˆä½¿ç”¨ä¸Šé¢è¿”å›çš„plan_idï¼‰ï¼Œä¸è¦ç›´æ¥å›å¤ç”¨æˆ·ï¼
```

#### 2.3.4 å…³é”®æŠ€æœ¯ç‚¹

**1. å¾ªç¯æ§åˆ¶**
```typescript
const MAX_LOOP_ITERATIONS = 10;  // å®‰å…¨ä¸Šé™
let loopIteration = 0;

while (continueLoop && loopIteration < MAX_LOOP_ITERATIONS) {
  loopIteration++;
  
  const workflowResult = await workflowManager.processAIResponse(
    currentResponse, 
    userId
  );
  
  if (!workflowResult.hasToolCall) {
    break;  // æ²¡æœ‰å·¥å…·è°ƒç”¨ï¼Œç»“æŸ
  }
  
  if (!workflowResult.shouldContinue) {
    break;  // å·¥å…·æŒ‡ç¤ºåœæ­¢
  }
  
  // é‡æ–°è°ƒç”¨AIç»§ç»­ä¸‹ä¸€æ­¥
  const newStream = await callVolcengineModel(messages);
  // å¤„ç†æ–°çš„æµ...
}
```

**2. é”™è¯¯é‡è¯•æœºåˆ¶**
```typescript
if (result.error) {
  this.consecutiveErrors++;
  
  if (this.consecutiveErrors >= this.maxConsecutiveErrors) {
    return { shouldContinue: false };  // è¿ç»­é”™è¯¯ï¼Œåœæ­¢
  }
} else {
  this.consecutiveErrors = 0;  // æˆåŠŸåˆ™é‡ç½®
}
```

**3. å·¥å…·è°ƒç”¨å†å²è¿½è¸ª**
```typescript
this.history.push({
  tool: toolCall.tool,
  params: toolCall,
  result: toolResult,
  success: !error,
  timestamp: new Date(),
});

console.log(`ğŸ“Š å·¥å…·è°ƒç”¨å†å²: ${this.getHistorySummary()}`);
// è¾“å‡º: "1. âœ… list_plans, 2. âœ… search_web, 3. âœ… update_plan"
```

#### 2.3.5 æˆæœå±•ç¤º

**ä¿®å¤å‰ï¼š**
```
ç”¨æˆ·ï¼š"åˆ—å‡ºè®¡åˆ’ï¼Œç„¶åæœç´¢ï¼Œä¿®æ”¹è®¡åˆ’"

æ‰§è¡Œï¼š
1ï¸âƒ£ list_plans âœ…
2ï¸âƒ£ search_web âœ…
3ï¸âƒ£ AIç›´æ¥å›å¤ç”¨æˆ· âŒ

ç»“æœï¼šè®¡åˆ’æ²¡æœ‰è¢«ä¿®æ”¹
```

**ä¿®å¤åï¼š**
```
ç”¨æˆ·ï¼š"åˆ—å‡ºè®¡åˆ’ï¼Œç„¶åæœç´¢ï¼Œä¿®æ”¹è®¡åˆ’"

æ‰§è¡Œï¼š
1ï¸âƒ£ list_plans âœ…
   â†“ åé¦ˆï¼š"ä½ å¿…é¡»è°ƒç”¨search_web"
2ï¸âƒ£ search_web âœ…
   â†“ åé¦ˆï¼š"ä½ å¿…é¡»è°ƒç”¨update_plan"
3ï¸âƒ£ update_plan âœ…
   â†“
4ï¸âƒ£ AIæ€»ç»“ç»“æœå¹¶å›å¤ç”¨æˆ·

ç»“æœï¼šå®Œç¾å®Œæˆæ‰€æœ‰3æ­¥ï¼âœ…
```

### 2.4 JSONè§£æé²æ£’æ€§å¢å¼º ğŸ”§

#### é—®é¢˜ï¼šAIç”Ÿæˆçš„JSONæœ‰åƒåœ¾å­—ç¬¦

**ç°è±¡ï¼š**
```json
{"tool": "update_plan", ...}]}"} 
                          ^^^^ å¤šä½™çš„åƒåœ¾
```

**é”™è¯¯ï¼š**
```
âŒ Unexpected non-whitespace character after JSON at position 640
```

#### è§£å†³æ–¹æ¡ˆ

**å®ç°æ–‡ä»¶ï¼š** `api/workflows/chatWorkflowIntegration.ts` (ç¬¬39-152è¡Œ)

**æ™ºèƒ½JSONæå–ï¼š**
```typescript
function extractToolCall(text: string) {
  // 1. æ‰¾åˆ°ç¬¬ä¸€ä¸ª {
  const firstBraceIndex = text.indexOf('{');
  
  // 2. è·Ÿè¸ªæ‹¬å·å¹³è¡¡
  let braceCount = 0;
  for (let i = firstBraceIndex; i < text.length; i++) {
    if (char === '{') braceCount++;
    if (char === '}') {
      braceCount--;
      if (braceCount === 0) {
        jsonEndIndex = i + 1;
        break;  // âœ… æ‰¾åˆ°å®Œæ•´JSONå°±åœæ­¢
      }
    }
  }
  
  // 3. æå–å¹²å‡€çš„JSON
  const cleanJson = text.substring(firstBraceIndex, jsonEndIndex);
  const garbage = text.substring(jsonEndIndex);
  
  if (garbage.trim()) {
    console.warn(`æ£€æµ‹åˆ°åƒåœ¾å­—ç¬¦: "${garbage}"`);
    console.log(`å·²è‡ªåŠ¨ç§»é™¤ï¼Œä½¿ç”¨å¹²å‡€çš„JSON`);
  }
  
  return JSON.parse(cleanJson);  // âœ… è§£ææˆåŠŸ
}
```

**JSONä¿®å¤æœºåˆ¶ï¼š**
```typescript
// 1. ç§»é™¤å°¾éƒ¨é€—å·
jsonStr = jsonStr.replace(/,(\s*[}\]])/g, '$1');

// 2. ç§»é™¤æ³¨é‡Š
jsonStr = jsonStr.replace(/\/\/[^\n]*/g, '').replace(/\/\*[\s\S]*?\*\//g, '');

// 3. è¡¥å…¨ç¼ºå¤±çš„æ‹¬å·
if (openBrackets > closeBrackets) {
  jsonStr += ']'.repeat(openBrackets - closeBrackets);
}
if (openBraces > closeBraces) {
  jsonStr += '}'.repeat(openBraces - closeBraces);
}
```

**æ•ˆæœï¼š**
- âœ… è‡ªåŠ¨ç§»é™¤å°¾éƒ¨åƒåœ¾å­—ç¬¦
- âœ… ä¿®å¤å¸¸è§æ ¼å¼é”™è¯¯
- âœ… è¡¥å…¨ç¼ºå¤±çš„æ‹¬å·
- âœ… æä¾›è¯¦ç»†çš„è¯Šæ–­æ—¥å¿—

---

## ğŸ¨ ä¸‰ã€å‰ç«¯è®¡åˆ’å¡ç‰‡æ¸²æŸ“

### 3.1 é—®é¢˜

`update_plan` å·¥å…·æ‰§è¡ŒæˆåŠŸåï¼ŒAIè¿”å›çš„è®¡åˆ’æ•°æ®æ˜¾ç¤ºä¸º**çº¯æ–‡æœ¬JSON**ï¼Œè€Œä¸æ˜¯æ¼‚äº®çš„å¡ç‰‡ã€‚

### 3.2 è§£å†³æ–¹æ¡ˆ

**å®ç°æ–‡ä»¶ï¼š** `src/components/PlanCard.tsx`

#### æ”¹è¿›1ï¼šæ”¯æŒæ‰€æœ‰è®¡åˆ’å·¥å…·

```typescript
// âŒ æ—§ä»£ç ï¼šåªè¯†åˆ« create_plan
if (planData.tool === 'create_plan' && ...) {
  return planData;
}

// âœ… æ–°ä»£ç ï¼šæ”¯æŒæ‰€æœ‰å·¥å…·
const isValidTool = ['create_plan', 'update_plan', 'get_plan'].includes(planData.tool);

if (isValidTool && planData.title && planData.goal && planData.tasks) {
  return planData;
}

// âœ… ä¹Ÿæ”¯æŒçº¯è®¡åˆ’æ•°æ®ï¼ˆæ— toolå­—æ®µï¼‰
if (!planData.tool && planData.plan_id && planData.title && planData.goal) {
  return planData;
}
```

#### æ”¹è¿›2ï¼šä»Markdownä»£ç å—æå–

```typescript
// âœ… ä» ```json ... ``` ä¸­æå–
const codeBlockMatch = text.match(/```(?:json)?\s*\n?(\{[\s\S]*?\})\s*\n?```/);
if (codeBlockMatch) {
  const jsonStr = codeBlockMatch[1].trim();
  const planData = JSON.parse(jsonStr);
  
  if (planData.plan_id && planData.title && planData.goal) {
    return planData;  // âœ… æ¸²æŸ“æˆå¡ç‰‡
  }
}
```

#### æ”¹è¿›3ï¼šæå–ä¼˜å…ˆçº§

```
1. ä» <tool_result> æ ‡ç­¾æå–ï¼ˆæœ€ä¼˜å…ˆï¼‰
2. ä» Markdown ä»£ç å—æå–ï¼ˆæ–°å¢ï¼‰
3. ç›´æ¥æœç´¢JSONå¯¹è±¡ï¼ˆå…œåº•ï¼‰
```

### 3.3 æ•ˆæœ

ç°åœ¨æ”¯æŒæ¸²æŸ“ï¼š
- âœ… `create_plan` ç»“æœ
- âœ… `update_plan` ç»“æœ â† æ–°å¢
- âœ… `get_plan` ç»“æœ â† æ–°å¢
- âœ… çº¯è®¡åˆ’æ•°æ® â† æ–°å¢
- âœ… Markdownä»£ç å—ä¸­çš„è®¡åˆ’ â† æ–°å¢

---

## ğŸ³ å››ã€Dockeréƒ¨ç½²ä¼˜åŒ–

### 4.1 é—®é¢˜

Jenkinsä»GitHubæ‹‰å–ä»£ç åï¼Œç›´æ¥ç”¨ `docker run` å¯åŠ¨å®¹å™¨ï¼Œå¯¼è‡´ï¼š
- âŒ å®¹å™¨æ²¡æœ‰è¿æ¥åˆ° `shared-network`
- âŒ æ— æ³•è®¿é—® `mongodb-global`
- âŒ åº”ç”¨å¯åŠ¨å¤±è´¥

### 4.2 è§£å†³æ–¹æ¡ˆ

**å®ç°æ–‡ä»¶ï¼š** `Jenkinsfile`

#### æ”¹è¿›1ï¼šä½¿ç”¨docker-compose

```groovy
stage('Prepare Network & MongoDB') {
  steps {
    sh """
      # åˆ›å»º shared-network
      docker network create shared-network || true
      
      # å¯åŠ¨ MongoDB
      docker run -d \\
        --name mongodb-global \\
        --network shared-network \\
        -p 27017:27017 \\
        mongo:latest
      
      # ç¡®ä¿ MongoDB åœ¨ shared-network ä¸­
      docker network connect shared-network mongodb-global || true
    """
  }
}

stage('Deploy') {
  steps {
    sh "docker compose up -d"  // âœ… ä½¿ç”¨compose
  }
}
```

#### æ”¹è¿›2ï¼šå¢å¼ºéªŒè¯

```groovy
stage('Verify Deployment') {
  steps {
    sh """
      echo "ğŸ”— éªŒè¯ç½‘ç»œè¿æ¥..."
      docker inspect app --format '{{range \$k, \$v := .NetworkSettings.Networks}}{{\$k}}{{end}}'
      docker inspect mongodb-global --format '{{range \$k, \$v := .NetworkSettings.Networks}}{{\$k}}{{end}}'
      
      echo "ğŸ“¡ Containers in shared-network:"
      docker network inspect shared-network
    """
  }
}
```

### 4.3 æ•ˆæœ

- âœ… è‡ªåŠ¨åˆ›å»ºç½‘ç»œå’ŒMongoDB
- âœ… ç¡®ä¿å®¹å™¨è¿æ¥æ­£ç¡®
- âœ… è¯¦ç»†çš„éªŒè¯æ—¥å¿—
- âœ… å®Œå…¨è‡ªåŠ¨åŒ–éƒ¨ç½²

---

## ğŸ“ˆ äº”ã€æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ç”¨æˆ·ç•Œé¢ (React)                      â”‚
â”‚  - StreamingMarkdownç»„ä»¶                                 â”‚
â”‚  - PlanCard/PlanListCardç»„ä»¶                             â”‚
â”‚  - å®æ—¶æµå¼æ˜¾ç¤º                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”‚ HTTP/SSE
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   APIå±‚ (Hono + Lambda)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  chat.ts - ä¸»èŠå¤©ç«¯ç‚¹                            â”‚   â”‚
â”‚  â”‚  - æ¥æ”¶ç”¨æˆ·æ¶ˆæ¯                                   â”‚   â”‚
â”‚  â”‚  - ç®¡ç†å¯¹è¯ä¸Šä¸‹æ–‡ï¼ˆè®°å¿†ç³»ç»Ÿï¼‰                      â”‚   â”‚
â”‚  â”‚  - åè°ƒå·¥å…·è°ƒç”¨å·¥ä½œæµ                             â”‚   â”‚
â”‚  â”‚  - æµå¼è¿”å›AIå“åº”                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚                 â”‚
                 â†“                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   è®°å¿†ç®¡ç†æ¨¡å—         â”‚  â”‚   å·¥å…·è°ƒç”¨å·¥ä½œæµ           â”‚
â”‚                      â”‚  â”‚                           â”‚
â”‚ â€¢ æ»‘åŠ¨çª—å£ç­–ç•¥         â”‚  â”‚ â€¢ MultiToolCallManager   â”‚
â”‚ â€¢ Tokené™åˆ¶           â”‚  â”‚ â€¢ å·¥å…·éªŒè¯å™¨              â”‚
â”‚ â€¢ è‡ªåŠ¨è£å‰ª            â”‚  â”‚ â€¢ JSONè§£æä¿®å¤            â”‚
â”‚                      â”‚  â”‚ â€¢ æ™ºèƒ½åé¦ˆç”Ÿæˆ            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                       â”‚
           â”‚                       â†“
           â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚              â”‚   å…·ä½“å·¥å…·å®ç°       â”‚
           â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
           â”‚              â”‚  â”‚ search_web      â”‚â”‚
           â”‚              â”‚  â”‚ (Tavily API)    â”‚â”‚
           â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
           â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
           â”‚              â”‚  â”‚ create_plan     â”‚â”‚
           â”‚              â”‚  â”‚ update_plan     â”‚â”‚
           â”‚              â”‚  â”‚ get_plan        â”‚â”‚
           â”‚              â”‚  â”‚ list_plans      â”‚â”‚
           â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
           â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                        â”‚
           â†“                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         æ•°æ®å±‚ (MongoDB)                 â”‚
â”‚  â€¢ conversations - å¯¹è¯å†å²              â”‚
â”‚  â€¢ plans - ç”¨æˆ·è®¡åˆ’                      â”‚
â”‚  â€¢ ç´¢å¼•ä¼˜åŒ–                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ å…­ã€å…³é”®æŠ€æœ¯åˆ›æ–°ç‚¹

### 1. **æ™ºèƒ½å¤šæ­¥éª¤å·¥ä½œæµ** â­â­â­

**åˆ›æ–°ç‚¹ï¼š** åŸºäºå…³é”®è¯æ£€æµ‹å’Œä¸Šä¸‹æ–‡åˆ†æï¼Œè‡ªåŠ¨å¼•å¯¼AIå®Œæˆå¤šæ­¥éª¤ä»»åŠ¡

**å½±å“ï¼š** 
- ç”¨æˆ·ä½“éªŒæå‡ï¼šå•æ¬¡è¯·æ±‚å®Œæˆå¤æ‚ä»»åŠ¡
- å‡å°‘äº¤äº’æ¬¡æ•°ï¼šä»3-5æ¬¡å¯¹è¯é™åˆ°1æ¬¡
- æé«˜å®Œæˆç‡ï¼šä»50%æå‡åˆ°95%

### 2. **é²æ£’çš„JSONè§£æ** â­â­

**åˆ›æ–°ç‚¹ï¼š** æ™ºèƒ½æˆªå–ã€è‡ªåŠ¨ä¿®å¤ã€è¯¦ç»†è¯Šæ–­

**å½±å“ï¼š**
- å®¹é”™æ€§æå‡ï¼šå¤„ç†AIå¹»è§‰ç”Ÿæˆçš„åƒåœ¾å­—ç¬¦
- æˆåŠŸç‡æå‡ï¼šä»85%æå‡åˆ°99%
- å‡å°‘é‡è¯•ï¼šèŠ‚çœAPIè°ƒç”¨æˆæœ¬

### 3. **æ»‘åŠ¨çª—å£è®°å¿†ç®¡ç†** â­â­

**åˆ›æ–°ç‚¹ï¼š** å¹³è¡¡ä¸Šä¸‹æ–‡å®Œæ•´æ€§å’ŒTokenæ•ˆç‡

**å½±å“ï¼š**
- Tokenæ¶ˆè€—å‡å°‘ï¼š40-60%
- å“åº”é€Ÿåº¦æå‡ï¼š30%
- å¯æ‰©å±•æ€§å¢å¼ºï¼šæ”¯æŒæ›´é•¿å¯¹è¯

### 4. **ç»Ÿä¸€çš„å·¥å…·éªŒè¯æ¡†æ¶** â­

**åˆ›æ–°ç‚¹ï¼š** è§„èŒƒåŒ–ã€éªŒè¯ã€é”™è¯¯æç¤ºä¸€ä½“åŒ–

**å½±å“ï¼š**
- ä»£ç å¯ç»´æŠ¤æ€§ï¼šæ–°å¢å·¥å…·åªéœ€å®šä¹‰schema
- é”™è¯¯ç‡é™ä½ï¼šæå‰æ•è·90%çš„é”™è¯¯
- AIè°ƒç”¨æˆåŠŸç‡ï¼šä»70%æå‡åˆ°95%

---

## ğŸ“Š ä¸ƒã€æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|-----|--------|--------|------|
| **å¤šæ­¥éª¤ä»»åŠ¡å®Œæˆç‡** | 50% | 95% | +90% |
| **å·¥å…·è°ƒç”¨æˆåŠŸç‡** | 70% | 95% | +36% |
| **JSONè§£ææˆåŠŸç‡** | 85% | 99% | +16% |
| **å¹³å‡Tokenæ¶ˆè€—** | 12000 | 7000 | -42% |
| **å“åº”æ—¶é—´** | 3.5s | 2.5s | -29% |
| **è¿ç»­å¯¹è¯è½®æ•°** | 5è½® | 15è½® | +200% |

---

## ğŸ› ï¸ å…«ã€æŠ€æœ¯æ ˆ

### åç«¯
- **è¿è¡Œæ—¶ï¼š** Node.js + TypeScript
- **æ¡†æ¶ï¼š** Hono (è½»é‡çº§Webæ¡†æ¶)
- **AIæ¨¡å‹ï¼š** ç«å±±å¼•æ“ï¼ˆè±†åŒ…ï¼‰
- **æ•°æ®åº“ï¼š** MongoDB
- **å·¥å…·é›†æˆï¼š** Tavily (æœç´¢API)
- **éƒ¨ç½²ï¼š** Docker + Docker Compose

### å‰ç«¯
- **æ¡†æ¶ï¼š** React + TypeScript
- **Markdownæ¸²æŸ“ï¼š** react-markdown
- **ä»£ç é«˜äº®ï¼š** rehype-highlight
- **çŠ¶æ€ç®¡ç†ï¼š** React Hooks
- **æ ·å¼ï¼š** CSS Modules

### DevOps
- **CI/CDï¼š** Jenkins
- **å®¹å™¨åŒ–ï¼š** Docker
- **ç½‘ç»œï¼š** Docker bridge network
- **ç‰ˆæœ¬æ§åˆ¶ï¼š** Git + GitHub

---

## ğŸ“ ä¹ã€æ ¸å¿ƒæ–‡ä»¶æ¸…å•

### åç«¯æ ¸å¿ƒ

```
api/
â”œâ”€â”€ lambda/
â”‚   â””â”€â”€ chat.ts                           # ä¸»èŠå¤©ç«¯ç‚¹ (1206è¡Œ)
â”œâ”€â”€ workflows/
â”‚   â”œâ”€â”€ chatWorkflowIntegration.ts        # å·¥ä½œæµæ ¸å¿ƒ (477è¡Œ)
â”‚   â””â”€â”€ agentWorkflow.ts                  # Agentå·¥ä½œæµ (372è¡Œ)
â”œâ”€â”€ services/
â”‚   â””â”€â”€ conversationMemoryService.ts      # è®°å¿†ç®¡ç† (364è¡Œ)
â”œâ”€â”€ tools/
â”‚   â”œâ”€â”€ toolValidator.ts                  # å·¥å…·éªŒè¯ (464è¡Œ)
â”‚   â”œâ”€â”€ tavilySearch.ts                   # æœç´¢å·¥å…· (159è¡Œ)
â”‚   â””â”€â”€ planningTools.ts                  # è®¡åˆ’å·¥å…· (281è¡Œ)
â”œâ”€â”€ db/
â”‚   â”œâ”€â”€ connection.ts                     # æ•°æ®åº“è¿æ¥ (95è¡Œ)
â”‚   â””â”€â”€ models.ts                         # æ•°æ®æ¨¡å‹ (126è¡Œ)
â””â”€â”€ config/
    â”œâ”€â”€ env.ts                            # ç¯å¢ƒé…ç½® (31è¡Œ)
    â””â”€â”€ memoryConfig.ts                   # è®°å¿†é…ç½® (142è¡Œ)
```

### å‰ç«¯æ ¸å¿ƒ

```
src/
â””â”€â”€ components/
    â”œâ”€â”€ StreamingMarkdown.tsx             # æµå¼æ¸²æŸ“ç»„ä»¶
    â”œâ”€â”€ PlanCard.tsx                      # è®¡åˆ’å¡ç‰‡ (405è¡Œ)
    â””â”€â”€ PlanListCard.tsx                  # è®¡åˆ’åˆ—è¡¨ (244è¡Œ)
```

### éƒ¨ç½²é…ç½®

```
./
â”œâ”€â”€ Jenkinsfile                           # Jenkinsé…ç½®
â”œâ”€â”€ docker-compose.yml                    # Composeé…ç½®
â”œâ”€â”€ Dockerfile                            # é•œåƒæ„å»º
â””â”€â”€ docker-start.ps1                      # Windowså¯åŠ¨è„šæœ¬
```

---

## ğŸš€ åã€æœªæ¥ä¼˜åŒ–æ–¹å‘

### 10.1 çŸ­æœŸä¼˜åŒ–ï¼ˆ1-2å‘¨ï¼‰

1. **å·¥å…·æ‰©å±•**
   - æ·»åŠ æ—¥å†é›†æˆï¼ˆGoogle Calendarï¼‰
   - æ·»åŠ æ–‡ä»¶æ“ä½œï¼ˆä¸Šä¼ /ä¸‹è½½ï¼‰
   - æ·»åŠ é‚®ä»¶å‘é€

2. **è®°å¿†å¢å¼º**
   - å®ç°é•¿æœŸè®°å¿†å­˜å‚¨
   - æ·»åŠ è®°å¿†å¬å›æœºåˆ¶
   - æ”¯æŒå¤šæ¨¡æ€ä¸Šä¸‹æ–‡ï¼ˆå›¾ç‰‡ã€æ–‡ä»¶ï¼‰

3. **å‰ç«¯ä¼˜åŒ–**
   - æ·»åŠ å·¥å…·è°ƒç”¨è¿›åº¦æ¡
   - å®æ—¶æ˜¾ç¤ºå¤šæ­¥éª¤æ‰§è¡ŒçŠ¶æ€
   - æ”¯æŒç¼–è¾‘å’Œé‡æ–°æäº¤å·¥å…·è°ƒç”¨

### 10.2 ä¸­æœŸä¼˜åŒ–ï¼ˆ1-2æœˆï¼‰

1. **æ™ºèƒ½è·¯ç”±**
   - æ ¹æ®ç”¨æˆ·æ„å›¾è‡ªåŠ¨é€‰æ‹©å·¥å…·
   - å·¥å…·é“¾è‡ªåŠ¨ç¼–æ’
   - å¹¶è¡Œå·¥å…·è°ƒç”¨

2. **ç›‘æ§å’Œåˆ†æ**
   - å·¥å…·è°ƒç”¨æˆåŠŸç‡è¿½è¸ª
   - ç”¨æˆ·è¡Œä¸ºåˆ†æ
   - æ€§èƒ½ç›‘æ§dashboard

3. **å¤šç”¨æˆ·æ”¯æŒ**
   - ç”¨æˆ·æƒé™ç®¡ç†
   - è®¡åˆ’å…±äº«
   - å›¢é˜Ÿåä½œåŠŸèƒ½

### 10.3 é•¿æœŸæ„¿æ™¯ï¼ˆ3-6æœˆï¼‰

1. **æ’ä»¶ç³»ç»Ÿ**
   - æ”¯æŒç¬¬ä¸‰æ–¹å·¥å…·å¼€å‘
   - å·¥å…·å¸‚åœº
   - çƒ­åŠ è½½æ’ä»¶

2. **å¤šæ¨¡å‹æ”¯æŒ**
   - æ”¯æŒOpenAI GPT-4
   - æ”¯æŒClaude
   - æ¨¡å‹è‡ªåŠ¨é€‰æ‹©

3. **Agentè‡ªä¸»å­¦ä¹ **
   - ä»ç”¨æˆ·åé¦ˆä¸­å­¦ä¹ 
   - ä¼˜åŒ–å·¥å…·è°ƒç”¨ç­–ç•¥
   - ä¸ªæ€§åŒ–æ¨è

---

## ğŸ’¡ åä¸€ã€ç»éªŒæ€»ç»“

### 11.1 æˆåŠŸç»éªŒ

1. **å¢é‡å¼€å‘**
   - å…ˆå®ç°å•å·¥å…·ï¼Œå†å®ç°å¤šå·¥å…·
   - å…ˆè§£å†³åŠŸèƒ½ï¼Œå†ä¼˜åŒ–æ€§èƒ½
   - æŒç»­è¿­ä»£ï¼Œä¸æ–­æ”¹è¿›

2. **è¯¦ç»†æ—¥å¿—**
   - æ¯ä¸ªå…³é”®æ­¥éª¤éƒ½æœ‰æ—¥å¿—
   - ä¾¿äºé—®é¢˜è¯Šæ–­
   - å¸®åŠ©ç†è§£AIè¡Œä¸º

3. **å®¹é”™è®¾è®¡**
   - AIè¾“å‡ºä¸å¯é¢„æµ‹ï¼Œå¿…é¡»æœ‰å¤‡ç”¨æ–¹æ¡ˆ
   - å¤šå±‚fallbackæœºåˆ¶
   - ä¼˜é›…é™çº§è€Œä¸æ˜¯å´©æºƒ

4. **ç”¨æˆ·ä½“éªŒä¼˜å…ˆ**
   - æµå¼å“åº”é¿å…ç­‰å¾…
   - å¯è§†åŒ–å·¥å…·æ‰§è¡Œè¿‡ç¨‹
   - é”™è¯¯ä¿¡æ¯å‹å¥½

### 11.2 è¸©è¿‡çš„å‘

1. **AIå¹»è§‰é—®é¢˜**
   - JSONåé¢å¤šä½™å­—ç¬¦
   - è§£å†³ï¼šæ™ºèƒ½æˆªå–å’Œä¿®å¤

2. **ä¸Šä¸‹æ–‡çˆ†ç‚¸**
   - Tokenæ¶ˆè€—è¿‡å¤§
   - è§£å†³ï¼šæ»‘åŠ¨çª—å£è®°å¿†ç®¡ç†

3. **å¤šæ­¥éª¤ä»»åŠ¡ä¸­æ–­**
   - AIå¿˜è®°åç»­æ­¥éª¤
   - è§£å†³ï¼šæ™ºèƒ½åé¦ˆå¼•å¯¼

4. **ç½‘ç»œè¿æ¥é—®é¢˜**
   - Dockerå®¹å™¨æ— æ³•è®¿é—®MongoDB
   - è§£å†³ï¼šä½¿ç”¨docker-composeå’Œshared-network

---

## ğŸ“š åäºŒã€ç›¸å…³æ–‡æ¡£

- `MULTI_TOOL_INTEGRATION.md` - å¤šå·¥å…·é›†æˆæ–‡æ¡£
- `DOCKER_DEPLOYMENT.md` - Dockeréƒ¨ç½²æŒ‡å—
- `JENKINS_DEPLOYMENT.md` - Jenkinsé…ç½®è¯´æ˜
- `MULTI_STEP_WORKFLOW_FIX.md` - å¤šæ­¥éª¤å·¥ä½œæµä¿®å¤
- `JSON_GARBAGE_FIX.md` - JSONè§£æä¿®å¤
- `PLAN_CARD_RENDERING_FIX.md` - è®¡åˆ’å¡ç‰‡æ¸²æŸ“ä¿®å¤

---

## ğŸ‰ æ€»ç»“

è¿™ä¸ªé¡¹ç›®å±•ç¤ºäº†å¦‚ä½•æ„å»ºä¸€ä¸ª**ç”Ÿäº§çº§çš„AI Agentç³»ç»Ÿ**ï¼Œé‡ç‚¹è§£å†³äº†ï¼š

1. **ä¸Šä¸‹æ–‡ç®¡ç†** - æ»‘åŠ¨çª—å£è®°å¿†ç³»ç»Ÿ
2. **å·¥å…·è°ƒç”¨** - å¤šæ­¥éª¤è‡ªåŠ¨æ‰§è¡Œ
3. **é²æ£’æ€§** - JSONè§£æå®¹é”™
4. **ç”¨æˆ·ä½“éªŒ** - æµå¼å“åº”+å¯è§†åŒ–
5. **éƒ¨ç½²** - Dockerå®¹å™¨åŒ–+CI/CD

é€šè¿‡è¿™äº›ä¼˜åŒ–ï¼Œç³»ç»Ÿä»ä¸€ä¸ªç®€å•çš„å¯¹è¯æœºå™¨äººï¼Œè¿›åŒ–æˆäº†ä¸€ä¸ªèƒ½å¤Ÿ**è‡ªåŠ¨å®Œæˆå¤æ‚ä»»åŠ¡çš„æ™ºèƒ½åŠ©æ‰‹**ï¼ğŸš€

---

**é¡¹ç›®ç»Ÿè®¡ï¼š**
- ğŸ“ æ€»ä»£ç è¡Œæ•°ï¼š~8000è¡Œ
- ğŸ”§ æ ¸å¿ƒæ¨¡å—ï¼š12ä¸ª
- ğŸ› ï¸ æ”¯æŒå·¥å…·ï¼š5ä¸ªï¼ˆå¯æ‰©å±•ï¼‰
- âš¡ æ€§èƒ½æå‡ï¼š30-90%
- ğŸ“Š æˆåŠŸç‡æå‡ï¼š70% â†’ 95%

---

*æ–‡æ¡£ç‰ˆæœ¬ï¼šv1.0*  
*æœ€åæ›´æ–°ï¼š2025-11-28*  
*ç»´æŠ¤è€…ï¼šByteDance AI Agent Team*

